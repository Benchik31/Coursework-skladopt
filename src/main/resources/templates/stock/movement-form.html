<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/layout :: head(~{::title})}">
    <title>Новое движение | Склад</title>
</head>
<body>
<div th:replace="~{fragments/layout :: layout(~{::title}, ~{::main})}">
    <main>
        <div th:replace="~{fragments/breadcrumbs :: breadcrumbs('Новое движение')}"></div>
        <div class="d-flex align-items-center justify-content-between mb-3">
            <div>
                <h1 class="h4 mb-0">Новое движение</h1>
                <p class="text-muted mb-0">IN — приход, OUT — расход, TRANSFER — перемещение между складами.</p>
            </div>
            <a class="btn btn-outline-secondary" th:href="@{/stock-movements}">Назад к журналу</a>
        </div>

        <form th:action="@{/stock-movements/new}" th:object="${form}" method="post" class="row g-3">
            <div class="col-md-4">
                <label class="form-label" for="type">Тип</label>
                <select class="form-select" id="type" th:field="*{type}" required>
                    <option th:each="t : ${types}" th:value="${t}" th:text="${t}">IN</option>
                </select>
            </div>
            <div class="col-md-4">
                <label class="form-label" for="productId">Товар</label>
                <select class="form-select" id="productId" th:field="*{productId}" required>
                    <option th:each="p : ${products}" th:value="${p.id}" th:text="${p.name}">Товар</option>
                </select>
            </div>
            <div class="col-md-4">
                <label class="form-label" for="warehouseId">Склад</label>
                <select class="form-select" id="warehouseId" th:field="*{warehouseId}" required>
                    <option th:each="w : ${warehouses}" th:value="${w.id}" th:text="${w.name}">Склад</option>
                </select>
            </div>
            <div class="col-md-4">
                <label class="form-label" for="targetWarehouseId">Склад назначения (для TRANSFER)</label>
                <select class="form-select" id="targetWarehouseId" th:field="*{targetWarehouseId}">
                    <option th:value="${''}" selected>—</option>
                    <option th:each="w : ${warehouses}" th:value="${w.id}" th:text="${w.name}">Склад</option>
                </select>
            </div>
            <div class="col-md-4">
                <label class="form-label" for="quantity">Количество</label>
                <input type="number" step="1" min="1" class="form-control" id="quantity" th:field="*{quantity}" required>
                <div class="text-danger small" th:if="${#fields.hasErrors('quantity')}" th:errors="*{quantity}">Ошибка</div>
            </div>
            <div class="col-12">
                <label class="form-label" for="comment">Комментарий</label>
                <input type="text" class="form-control" id="comment" th:field="*{comment}" placeholder="Опционально">
            </div>
            <div class="col-12">
                <button class="btn btn-primary" type="submit">Сохранить</button>
            </div>
        </form>
    </main>
</div>
</body>
</html>
